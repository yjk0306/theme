{"remainingRequest":"/Users/yangjikai/Documents/GitHub/theme/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!/Users/yangjikai/Documents/GitHub/theme/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js??ref--13-0!/Users/yangjikai/Documents/GitHub/theme/src/plugin/Storage.js","dependencies":[{"path":"/Users/yangjikai/Documents/GitHub/theme/src/plugin/Storage.js","mtime":1585743625957},{"path":"/Users/yangjikai/Documents/GitHub/theme/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yangjikai/Documents/GitHub/theme/node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yangjikai/Documents/GitHub/theme/node_modules/_eslint-loader@2.2.1@eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMveWFuZ2ppa2FpL0RvY3VtZW50cy9HaXRIdWIvdGhlbWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMveWFuZ2ppa2FpL0RvY3VtZW50cy9HaXRIdWIvdGhlbWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKCnZhciBTdG9yYWdlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTdG9yYWdlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0b3JhZ2UpOwoKICAgIHRoaXMub2JqID0ge307CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuaGFuZGxlLmJpbmQodGhpcykpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFN0b3JhZ2UsIFt7CiAgICBrZXk6ICJoYW5kbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhhbmRsZShlKSB7CiAgICAgIHZhciBldmVudCA9IGUua2V5LAogICAgICAgICAgbmV3VmFsdWUgPSBlLm5ld1ZhbHVlOyAvLyBsb2NhbFN0b3JhZ2Ug5rKh5a2X5q6177yM5oiW6ICF5rKh6K6i6ZiF5bCx55u05o6l6L+U5ZueCgogICAgICBpZiAoIWxvY2FsU3RvcmFnZS5nZXRJdGVtKGV2ZW50KSB8fCAhdGhpcy5vYmpbZXZlbnRdKSByZXR1cm47IC8vIOWIoOmZpOS5n+S8muinpuWPkQoKICAgICAgaWYgKCFuZXdWYWx1ZSkgcmV0dXJuOwogICAgICB2YXIgZGF0YSA9IG51bGw7CgogICAgICB0cnkgewogICAgICAgIGRhdGEgPSBKU09OLnBhcnNlKG5ld1ZhbHVlKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygndGhpcyBpcyBhIGVycm9yIGluIGRhdGEgcGFyc2UnKTsKICAgICAgfQoKICAgICAgdGhpcy5vYmpbZXZlbnRdLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpdGVtICYmIGl0ZW0oZGF0YSk7CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLm9iaiwgMTExMTExMTExKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gb24oZXZlbnQsIGNhbGxiYWNrKSB7CiAgICAgIHRoaXMub2JqW2V2ZW50XSA9ICh0aGlzLm9ialtldmVudF0gfHwgW10pLmNvbmNhdChjYWxsYmFjayk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGV2ZW50LCAiaXRlbSIpOwogICAgfQogIH0sIHsKICAgIGtleTogImVtaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHsKICAgICAgdmFyIHBheWxvYWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICJpdGVtIjsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZXZlbnQsIHBheWxvYWQpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN0b3JhZ2U7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IHsKICBpbnN0YWxsOiBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSkgewogICAgVnVlLnByb3RvdHlwZS4kc3RvcmFnZSA9IG5ldyBTdG9yYWdlKCk7CiAgfQp9Ow=="},{"version":3,"sources":["/Users/yangjikai/Documents/GitHub/theme/src/plugin/Storage.js"],"names":["Storage","obj","window","addEventListener","handle","bind","e","event","key","newValue","localStorage","getItem","data","JSON","parse","error","console","log","forEach","item","callback","concat","setItem","payload","install","Vue","prototype","$storage"],"mappings":";;;;;;IAAMA,O;AACF,qBAAc;AAAA;;AACV,SAAKC,GAAL,GAAW,EAAX;AAEAC,IAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAnC;AACH;;;;2BACMC,C,EAAE;AAAA,UAEOC,KAFP,GAE0BD,CAF1B,CAEEE,GAFF;AAAA,UAEcC,QAFd,GAE0BH,CAF1B,CAEcG,QAFd,EAIL;;AACA,UAAI,CAACC,YAAY,CAACC,OAAb,CAAqBJ,KAArB,CAAD,IAAgC,CAAC,KAAKN,GAAL,CAASM,KAAT,CAArC,EAAsD,OALjD,CAOL;;AACA,UAAI,CAACE,QAAL,EAAe;AAEf,UAAIG,IAAI,GAAG,IAAX;;AAEA,UAAI;AACAA,QAAAA,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,QAAX,CAAP;AACH,OAFD,CAEE,OAAOM,KAAP,EAAc;AACZC,QAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACH;;AAED,WAAKhB,GAAL,CAASM,KAAT,EAAgBW,OAAhB,CAAwB,UAAAC,IAAI,EAAI;AAE5BA,QAAAA,IAAI,IAAIA,IAAI,CAACP,IAAD,CAAZ;AACH,OAHD;AAIAI,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKhB,GAAjB,EAAqB,SAArB;AAEH;;;uBACEM,K,EAAMa,Q,EAAS;AACd,WAAKnB,GAAL,CAASM,KAAT,IAAmB,CAAC,KAAKN,GAAL,CAASM,KAAT,KAAmB,EAApB,EAAwBc,MAAxB,CAA+BD,QAA/B,CAAnB;AACAV,MAAAA,YAAY,CAACY,OAAb,CAAqBf,KAArB,EAA2B,MAA3B;AACH;;;yBACIA,K,EAAqB;AAAA,UAAfgB,OAAe,uEAAP,MAAO;AACtBb,MAAAA,YAAY,CAACY,OAAb,CAAqBf,KAArB,EAA2BgB,OAA3B;AACH;;;;;;AAKL,eAAiB;AACbC,EAAAA,OADa,mBACLC,GADK,EACA;AACTA,IAAAA,GAAG,CAACC,SAAJ,CAAcC,QAAd,GAA0B,IAAI3B,OAAJ,EAA1B;AACH;AAHY,CAAjB","sourcesContent":["class Storage {\n    constructor() {\n        this.obj = {}\n\n        window.addEventListener('storage', this.handle.bind(this));\n    }\n    handle(e){\n\n        const {key: event, newValue} = e;\n\n        // localStorage 没字段，或者没订阅就直接返回\n        if (!localStorage.getItem(event) || !this.obj[event]) return;\n\n        // 删除也会触发\n        if (!newValue) return;\n\n        let data = null;\n\n        try {\n            data = JSON.parse(newValue);\n        } catch (error) {\n            console.log('this is a error in data parse');\n        }\n\n        this.obj[event].forEach(item => {\n\n            item && item(data);\n        });\n        console.log(this.obj,111111111)\n\n    }\n    on(event,callback){\n        this.obj[event] =  (this.obj[event] || []).concat(callback)\n        localStorage.setItem(event,\"item\")\n    }\n    emit(event,payload=\"item\"){\n        localStorage.setItem(event,payload)\n    }\n\n\n}\n\nexport  default  {\n    install(Vue) {\n        Vue.prototype.$storage =  new Storage()\n    }\n}\n"]}]}